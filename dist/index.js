(()=>{"use strict";var e={855:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(645),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,"*,*::after,*::before{margin:0;padding:0;box-sizing:border-box}img,svg{width:100%;height:100%}body{padding:0 10px}button{padding:5px 10px;border:1px solid #c1a6a6;border-radius:5px}input{border-radius:5px;border:1px solid #000}.fields{margin:20px 0}.garage h1{margin:10px 0}.garage .page{margin:10px 0}.car-track{border-bottom:2px dashed #000;position:relative}.car{width:100px;height:50px;margin-bottom:-8px;transform:translateX(calc(-100px + 100%))}.finish{right:100px;bottom:-10px;position:absolute;width:50px;height:50px}@keyframes drive{from{transform:translateX(calc(-100px + 100%))}to{transform:translateX(calc(-100px + 98vw))}}.car.drive{animation:drive;animation-timing-function:linear;animation-fill-mode:forwards}",""]);const o=a},877:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(645),a=n.n(r)()((function(e){return e[1]}));a.push([e.id,".table{width:100%;border-collapse:collapse;border-spacing:0;height:auto}.table__ceil,.table__header{border:1px solid #595959;text-align:center;min-height:35px;height:35px}.table__header{background-color:#347c99;color:#fff;font-size:18px;font-weight:800}",""]);const o=a},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var c=0;c<e.length;c++){var u=[].concat(e[c]);r&&a[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},252:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(379),a=n.n(r),o=n(855);a()(o.Z,{insert:"head",singleton:!1});const i=o.Z.locals||{}},411:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var r=n(379),a=n.n(r),o=n(877);a()(o.Z,{insert:"head",singleton:!1});const i=o.Z.locals||{}},379:(e,t,n)=>{var r,a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function i(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],a=0;a<e.length;a++){var c=e[a],u=t.base?c[0]+t.base:c[0],s=n[u]||0,l="".concat(u," ").concat(s);n[u]=s+1;var d=i(l),p={css:c[1],media:c[2],sourceMap:c[3]};-1!==d?(o[d].references++,o[d].updater(p)):o.push({identifier:l,updater:g(p,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var i=a(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var s,l=(s=[],function(e,t){return s[e]=t,s.filter(Boolean).join("\n")});function d(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,a);else{var o=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function p(e,t,n){var r=n.css,a=n.media,o=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var f=null,v=0;function g(e,t){var n,r,a;if(t.singleton){var o=v++;n=f||(f=u(t)),r=d.bind(null,n,o,!1),a=d.bind(null,n,o,!0)}else n=u(t),r=p.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=i(n[r]);o[a].references--}for(var u=c(e,t),s=0;s<n.length;s++){var l=i(n[s]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}n=u}}}},847:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.API=void 0;var a=function(){function e(){this.SERVER_URL="http://127.0.0.1:3000"}return e.prototype.getCars=function(e,t){return void 0===t&&(t=7),n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/garage?_page=").concat(e,"&_limit=").concat(t))];case 1:return[4,n.sent().json()];case 2:return[2,n.sent()]}}))}))},e.prototype.getCar=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/garage/").concat(e))];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()]}}))}))},e.prototype.getAmountCars=function(){return n(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/garage"))];case 1:return e=t.sent(),[4,Promise.resolve(e.json())];case 2:return[2,t.sent().length]}}))}))},e.prototype.startEngine=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/engine?id=").concat(e,"&status=started"),{method:"PATCH"})];case 1:return[2,t.sent().json()]}}))}))},e.prototype.stopEngine=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/engine?id=").concat(e,"&status=stopped"),{method:"PATCH"})];case 1:return[2,t.sent().json()]}}))}))},e.prototype.startDrive=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/engine?id=").concat(e,"&status=drive"),{method:"PATCH"})];case 1:return[2,t.sent().json()]}}))}))},e.prototype.getWinner=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/winners/").concat(e))];case 1:return[2,t.sent().json()]}}))}))},e.prototype.updateWinner=function(e,t){return n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/winners/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})];case 1:return[2,n.sent().json()]}}))}))},e.prototype.createWinner=function(e){return n(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/winners"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return[2,t.sent().json()]}}))}))},e.prototype.getWinnersAmount=function(){return n(this,void 0,void 0,(function(){var e;return r(this,(function(t){switch(t.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/winners"))];case 1:return e=t.sent(),[4,Promise.resolve(e.json())];case 2:return[2,t.sent().length]}}))}))},e.prototype.getAllWinners=function(){return n(this,void 0,void 0,(function(){return r(this,(function(e){switch(e.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/winners"))];case 1:return[4,e.sent().json()];case 2:return[2,e.sent()]}}))}))},e.prototype.getWinners=function(e,t,a,o){return void 0===e&&(e=1),void 0===t&&(t=10),void 0===a&&(a="id"),void 0===o&&(o="ASC"),n(this,void 0,void 0,(function(){return r(this,(function(n){switch(n.label){case 0:return[4,fetch("".concat(this.SERVER_URL,"/winners?_page=").concat(e,"&_limit=").concat(t,"&_sort=").concat(a,"&_order=").concat(o))];case 1:return[2,n.sent().json()]}}))}))},e.prototype.getWinnersWithCars=function(e,t,a,o){return void 0===e&&(e=1),void 0===t&&(t=10),void 0===a&&(a="id"),void 0===o&&(o="ASC"),n(this,void 0,void 0,(function(){var i,c=this;return r(this,(function(u){switch(u.label){case 0:return i=[],[4,this.getWinners(e,t,a,o)];case 1:return u.sent().forEach((function(e){return n(c,void 0,void 0,(function(){var t,n;return r(this,(function(r){switch(r.label){case 0:return[4,this.getCar(e.id.toString())];case 1:return t=r.sent(),n={id:e.id,wins:e.wins,time:e.time,name:t.name,color:t.color},i.push(n),[2]}}))}))})),[2,i]}}))}))},e}();t.API=a},717:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0,n(252);var r=function(){function e(){this.garagePageCounter=1,this.tracksOnPageAmount=7,this.winnersPageCounter=1,this.winnersOnPageAmount=10,this.sortValue="id",this.sortOrder="ASC",this.selectedCarData={name:"",color:"#000000",id:""},this.createCarData={name:"",color:"#000000"}}return Object.defineProperty(e.prototype,"garagePage",{get:function(){return this.garagePageCounter},set:function(e){e<1?alert("page cant be less 1"):this.garagePageCounter=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"winnersPage",{get:function(){return this.winnersPageCounter},set:function(e){e<1?alert("page cant be less 1"):this.winnersPageCounter=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tracksOnPage",{get:function(){return this.tracksOnPageAmount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"winnersOnPage",{get:function(){return this.winnersOnPageAmount},enumerable:!1,configurable:!0}),e.prototype.toggleOrder=function(){"ASC"===this.sortOrder?this.sortOrder="DESC":this.sortOrder="ASC"},Object.defineProperty(e.prototype,"selectedCar",{get:function(){return this.selectedCarData},set:function(e){this.selectedCarData=e,console.log("changed",this.selectedCarData)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"createdCar",{get:function(){return this.createCarData},set:function(e){this.createCarData=e},enumerable:!1,configurable:!0}),e}();t.App=r},906:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CarTrack=void 0;var a=function(){function e(){}return e.prototype.createInputs=function(){return'\n        <div class="field__create create">\n          <input class="create__input" type="text">\n          <input class="create__input" type="color">\n          <button>create</button>\n        </div>\n        '},e.prototype.updateInputs=function(){return'\n        <div class="field__update update">\n          <input class="update__input" type="text" disabled>\n          <input class="update__input" type="color" disabled>\n          <button disabled class="update__button">update</button>\n        </div>\n        '},e.prototype.generateTrackWrapper=function(e,t){var a=document.createElement("main");a.classList.add("garage"),document.querySelector(".fields").after(a);var o=document.createElement("div"),i=document.createElement("h1");n(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return[4,e.getAmountCars()];case 1:return t=n.sent(),i.innerHTML="Garage (".concat(t,")"),[2]}}))})),o.classList.add("trackList");var c=document.createElement("h2");c.innerHTML='Page <span class="page__number">'.concat(t.garagePage,"</span>");var u=document.createElement("div");u.innerHTML='\n        <button disabled class="pagination__prev">prev</button>\n        <button class="pagination__next">next</button>\n        ',u.classList.add("pagination"),a.append(c,i,o,u)},e.prototype.paginationHandler=function(e,t){var n=this,r=document.querySelector(".pagination");null==r||r.addEventListener("click",(function(r){var a=document.querySelector(".pagination__prev"),o=document.querySelector(".pagination__next"),i=r.target;"pagination__prev"!==i.className||a.disabled||(t.garagePage-=1),"pagination__next"!==i.className||o.disabled||(t.garagePage+=1),n.createTrack(e.getCars(t.garagePage)),setTimeout((function(){return n.carHandler(e)}),100),n.paginationClickableButtons(t,e),n.updatePageNumber(t),document.querySelector(".fields__button-reset").disabled=!0,document.querySelector(".fields__button-start").disabled=!1}))},e.prototype.updatePageNumber=function(e,t){void 0===t&&(t=e.garagePage),document.querySelector(".page__number").innerText=String(t)},e.prototype.paginationClickableButtons=function(e,t,a){void 0===a&&(a=e.garagePage);var o=document.querySelector(".pagination__prev"),i=document.querySelector(".pagination__next");o.disabled=1===a,n(this,void 0,void 0,(function(){var n,a,o=this;return r(this,(function(r){switch(r.label){case 0:return[4,t.getAmountCars()];case 1:return n=r.sent(),(a=Math.ceil(n/e.tracksOnPage))>e.garagePage?i.disabled=!1:i.disabled=!0,a<e.garagePage&&(e.garagePage-=1,this.createTrack(t.getCars(e.garagePage)),this.updatePageNumber(e),setTimeout((function(){return o.carHandler(t)}),100)),[2]}}))}))},e.prototype.updateGarageAmount=function(e){var t=document.querySelector("h1");n(this,void 0,void 0,(function(){var n;return r(this,(function(r){switch(r.label){case 0:return[4,e.getAmountCars()];case 1:return n=r.sent(),t.innerHTML="Garage (".concat(n,")"),[2]}}))}))},e.prototype.markupTrack=function(e){var t=e.name,n=e.color,r=e.id;return'\n          <div class="car-track">\n          <h3 class="car__title">'.concat(t,'</h3>\n          <div class="car__buttons">\n          <button class="car__button car__button-select">select</button>\n          <button class="car__button car__button-remove">remove</button>\n          <button class="button-start">A</button>\n          <button class="button-stop" disabled>B</button>\n          </div>\n  \n          <div class="car" id="').concat(r,'">\n            <svg><use xlink:href="./sprite.svg#car" fill="').concat(n,'"></use></svg>\n          </div>\n          <div class="finish">\n          <svg><use xlink:href="./sprite.svg#finish"></use></svg>\n          </div>\n      </div>\n      ')},e.prototype.createTrack=function(e){var t=this,n=document.querySelector(".trackList");e.then((function(e){var r=e.map((function(e){return t.markupTrack(e)})).join("");n.innerHTML=r}))},e.prototype.deleteCar=function(e){fetch("http://127.0.0.1:3000/garage/".concat(e),{method:"DELETE"}),fetch("http://127.0.0.1:3000/winners/".concat(e),{method:"DELETE"})},e.prototype.createCar=function(e,t){fetch("http://127.0.0.1:3000/garage/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,color:t})})},e.prototype.updateCar=function(e,t,n){fetch("http://127.0.0.1:3000/garage/".concat(n),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,color:t})})},e.prototype.carHandler=function(e){var t=this;document.querySelectorAll(".car-track").forEach((function(a){a.addEventListener("click",(function(a){return n(t,void 0,void 0,(function(){var t,n,o,i,c,u,s,l,d,p;return r(this,(function(r){return t=a.target,n=null===(s=null===(u=a.target.parentElement)||void 0===u?void 0:u.nextElementSibling)||void 0===s?void 0:s.id,o=null===(l=a.target.parentElement)||void 0===l?void 0:l.nextElementSibling,i=null===(d=t.closest(".car-track"))||void 0===d?void 0:d.querySelector(".button-start"),c=null===(p=t.closest(".car-track"))||void 0===p?void 0:p.querySelector(".button-stop"),"button-start"===t.className&&this.engineOperation(n,o,e,i,c),"button-stop"===t.className&&(c.disabled=!0,null==o||o.classList.remove("drive"),i.disabled=!1),[2]}))}))}))}))},e.prototype.engineOperation=function(e,t,a,o,i){return n(this,void 0,void 0,(function(){var n,c,u,s,l;return r(this,(function(r){switch(r.label){case 0:return o.disabled=!0,[4,a.startEngine(e)];case 1:n=r.sent(),c=n.velocity,u=n.distance,s=(u/c/1e3).toFixed(1),null==t||t.classList.add("drive"),t.style.cssText="animation-duration: ".concat(s,"s;"),i.disabled=!1,r.label=2;case 2:return r.trys.push([2,4,,7]),[4,a.startDrive(e)];case 3:return l=r.sent().success,[2,{time:s,success:l,id:e}];case 4:return r.sent()instanceof Error?(t.style.animationPlayState="paused",[4,a.stopEngine(e)]):[3,6];case 5:r.sent(),r.label=6;case 6:return[3,7];case 7:return[2]}}))}))},e}();t.CarTrack=a},719:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Control=void 0;var n=function(){function e(){}return e.prototype.generateControl=function(e,t){var n=document.createElement("div");n.classList.add("fields"),document.querySelector(".app").append(n);var r=[t.createInputs(),t.updateInputs(),e.generateButtons()];n.innerHTML="".concat(r.map((function(e){return e})).join(""))},e}();t.Control=n},108:function(e,t){var n=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},r=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Generate=void 0;var a=function(){function e(){}return e.prototype.generateApp=function(){document.querySelector("body").innerHTML="".concat('\n        <div class="app">\n            <nav class="nav">\n            <button class="nav__button nav__button-garage">garage</button>\n            <button class="nav__button nav__button-winners">winners</button>\n            </nav>\n        </div>\n        ')},e.prototype.generateGarage=function(e,t,n,r,a){e.generateControl(t,n),n.generateTrackWrapper(r,a),n.paginationHandler(r,a),n.paginationClickableButtons(a,r),setTimeout((function(){return n.carHandler(r)}),100)},e.prototype.generateGarageListeners=function(e,t,n){var r=this,a=document.querySelector(".trackList");null==a||a.addEventListener("click",(function(a){var o,i,c=a.target;if(c.closest(".car-track")&&c.classList.contains("car__button-remove")||c.classList.contains("car__button-select")){if(c.classList.contains("car__button-remove")){var u=null===(i=null===(o=c.parentElement)||void 0===o?void 0:o.nextElementSibling)||void 0===i?void 0:i.id;e.deleteCar(u)}c.classList.contains("car__button-select")&&r.selectButton(c,t,e,n),setTimeout((function(){e.createTrack(t.getCars(n.garagePage)),setTimeout((function(){return e.carHandler(t)}),100),e.updateGarageAmount(t),e.paginationClickableButtons(n,t)}),100)}}));var o=document.querySelector(".field__create.create");null==o||o.addEventListener("click",(function(a){r.createInputListeners(a,e,t,n,o),n.createdCar={name:"",color:""}}));var i=document.querySelector(".create__input[type=text]"),c=document.querySelector(".create__input[type=color]"),u="",s="";i.addEventListener("input",(function(e){var t=e.target.value;u=t,n.createdCar={name:u,color:s}})),c.addEventListener("input",(function(e){var t=e.target.value;s=t,n.createdCar={name:u,color:s}}));var l=document.querySelector(".fields__button-start"),d=document.querySelector(".fields__button-reset");l.addEventListener("click",(function(){r.startRaceBtnListener(e,t,l,d)})),d.addEventListener("click",(function(){r.stopRaceBtnListener(e,t,n,l,d)}))},e.prototype.selectButton=function(e,t,n,r){var a,o,i=null===(o=null===(a=e.parentElement)||void 0===a?void 0:a.nextElementSibling)||void 0===o?void 0:o.id,c=document.querySelector(".field__update.update"),u=null==c?void 0:c.querySelector("button");null==c||c.childNodes.forEach((function(e){e.disabled=!1}));var s=null==c?void 0:c.querySelector(".update__input[type=text]"),l=null==c?void 0:c.querySelector(".update__input[type=color]");t.getCar(i).then((function(e){s.value=e.name,l.value=e.color,r.selectedCar={name:e.name,color:e.color,id:i}})),null==u||u.addEventListener("click",(function(){"BUTTON"===e.tagName&&s.value&&l.value&&(n.updateCar(s.value,l.value,i),null==c||c.childNodes.forEach((function(e){e.disabled=!0})),s.value="",l.value="#000000",r.selectedCar.name="",r.selectedCar.color="#000000",r.selectedCar.id="",n.createTrack(t.getCars(r.garagePage)),setTimeout((function(){return n.carHandler(t)}),100))}))},e.prototype.createInputListeners=function(e,t,n,r,a){if("BUTTON"===(null==e?void 0:e.target).tagName){var o=a.querySelector(".create__input[type=text]").value,i=a.querySelector(".create__input[type=color]").value;o&&i&&(t.createCar(o,i),t.createTrack(n.getCars(r.garagePage)),setTimeout((function(){return t.carHandler(n)}),100),t.updateGarageAmount(n),t.paginationClickableButtons(r,n)),a.querySelector(".create__input[type=text]").value="",a.querySelector(".create__input[type=color]").value="#000000"}},e.prototype.startRaceBtnListener=function(e,t,a,o){var i=this,c=[],u=!1,s=document.querySelectorAll(".car");a.disabled=!0,o.disabled=!1,s.forEach((function(a){var o,s,l=a,d=l.id,p=null===(o=l.closest(".car-track"))||void 0===o?void 0:o.querySelector(".button-start"),f=null===(s=l.closest(".car-track"))||void 0===s?void 0:s.querySelector(".button-stop");n(i,void 0,void 0,(function(){var n,o,i,s,l,v,g,h;return r(this,(function(r){switch(r.label){case 0:return[4,e.engineOperation(d,a,t,p,f)];case 1:return(n=r.sent())?(c.push(n),!c.length||u?[3,6]:(o=c[0],u=!0,[4,t.getAllWinners()])):[2];case 2:return i=r.sent(),[4,t.getCar(o.id)];case 3:return s=r.sent().name,alert("Win ".concat(s," with time ").concat(o.time)),i.find((function(e){return Number(e.id)===Number(o.id)}))?[4,t.getWinner(o.id)]:[3,5];case 4:return l=r.sent(),v=o.time<l.time?o.time:l.time,g={wins:++l.wins,time:Number(v)},t.updateWinner(d,g),[3,6];case 5:h={id:Number(o.id),time:Number(o.time),wins:1},t.createWinner(h),r.label=6;case 6:return[2]}}))}))}))},e.prototype.stopRaceBtnListener=function(e,t,n,r,a){r.disabled=!1,a.disabled=!0,document.querySelectorAll(".car").forEach((function(e){var n,r,a=e;t.stopEngine(a.id);var o=null===(n=a.closest(".car-track"))||void 0===n?void 0:n.querySelector(".button-start");(null===(r=a.closest(".car-track"))||void 0===r?void 0:r.querySelector(".button-stop")).disabled=!0,null==a||a.classList.remove("drive"),o.disabled=!1})),e.createTrack(t.getCars(n.garagePage)),setTimeout((function(){return e.carHandler(t)}),500)},e.prototype.generatePageWinners=function(e,t){var a=document.querySelector(".app"),o=document.createElement("h1");n(this,void 0,void 0,(function(){var n,i;return r(this,(function(r){switch(r.label){case 0:return[4,e.getWinnersAmount()];case 1:return n=r.sent(),o.innerHTML="Winners (".concat(n,")"),(i=document.createElement("h2")).innerHTML='Page <span class="page__number">'.concat(t.winnersPage,"</span>"),a.prepend(i,o),[2]}}))}))},e.prototype.generateWinners=function(e,t,a,o,i){return void 0===o&&(o="id"),void 0===i&&(i="ASC"),n(this,void 0,void 0,(function(){var n,c;return r(this,(function(r){switch(r.label){case 0:return[4,t.getWinnersWithCars(a.winnersPage,a.winnersOnPage,o,i)];case 1:return n=r.sent(),(c=document.querySelector(".table__body")).innerHTML="",setTimeout((function(){return n.forEach((function(t,n){return null==c?void 0:c.append(e.createTr(t,n,a))}))}),250),[2]}}))}))},e.prototype.generateWinnersListeners=function(e,t,n,r){var a=this,o=document.querySelector(".pagination");null==o||o.addEventListener("click",(function(o){var i=document.querySelector(".pagination__prev"),c=document.querySelector(".pagination__next"),u=o.target;"pagination__prev"!==u.className||i.disabled||(n.winnersPage-=1),"pagination__next"!==u.className||c.disabled||(n.winnersPage+=1),a.generateWinners(e,t,n,n.sortValue,n.sortOrder),e.isClickablePagination(n,t),r.updatePageNumber(n,n.winnersPage)}))},e.prototype.inputsFiller=function(e,t,n){var r,a,o=document.querySelector(".create__input[type=text]"),i=document.querySelector(".create__input[type=color]"),c="",u="#000000";if(""!==e.createdCar.name){var s=e.createdCar.name;o.value=s,c=s}if("#000000"!==e.createdCar.color){var l=e.createdCar.color;i.value=l,u=l}if(e.createdCar={name:c,color:u},""!==e.selectedCar.id){var d=e.selectedCar.name,p=e.selectedCar.color,f=null===(a=null===(r=document.getElementById(e.selectedCar.id))||void 0===r?void 0:r.parentElement)||void 0===a?void 0:a.querySelector(".car__button-select");this.selectButton(f,t,n,e),setTimeout((function(){var t=document.querySelector(".update__input[type=text]"),n=document.querySelector(".update__input[type=color]");t.value=d,n.value=p,e.selectedCar={id:e.selectedCar.id,name:d,color:p}}),100)}},e.prototype.inputListeners=function(e){var t=document.querySelector(".field__create .create__input[type=text]");null==t||t.addEventListener("input",(function(t){var n=t.target;e.createdCar.name=n.value}));var n=document.querySelector(".field__create .create__input[type=color]");null==n||n.addEventListener("input",(function(t){var n=t.target;e.createdCar.color=n.value}));var r=document.querySelector(".field__update .update__input[type=color]");null==r||r.addEventListener("input",(function(t){var n=t.target;e.selectedCar={id:e.selectedCar.id,name:e.selectedCar.name,color:n.value}}));var a=document.querySelector(".field__update .update__input[type=text]");null==a||a.addEventListener("input",(function(t){var n=t.target;e.selectedCar={id:e.selectedCar.id,name:n.value,color:e.selectedCar.color}})),r.addEventListener("change",(function(e){var t=e.target;r.value=t.value})),a.addEventListener("change",(function(e){var t=e.target;a.value=t.value}))},e}();t.Generate=a},289:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Race=void 0;var n=function(){function e(){}return e.prototype.generateButtons=function(){return'\n        <div class="fields__buttons">\n          <button class="fields__button fields__button-start">Race</button>\n          <button class="fields__button fields__button-reset" disabled>Reset</button>\n          <button class="fields__button fields__button-generate">Generate Cars</button>\n        </div>\n        '},e.prototype.generateCars=function(e,t){void 0===t&&(t=100);for(var n=["Lada","Toyota","BMW","Mercedes","UAZ","GAZ","Mazda","Shevrole","Audi","Mitsubishi","Jaguar","Izusu","Volvo","Opel","Ford","Nissan","Dodge","Porsche","Haval"],r=["Camry","Supra","A8","A4","S5","M2","M4","Miata","Focus","X","Kuga","S","Accord","190","S Class","Sonata","Cerato","Lanos"],a=0;a<t;a+=1){var o=Math.floor(Math.random()*n.length),i=Math.floor(Math.random()*r.length),c="".concat(n[o]," ").concat(r[i]),u=Math.floor(16777215*Math.random()).toString(16);e.createCar(c,"#".concat(u))}},e.prototype.generateRaceListeners=function(e,t,n){var r=this,a=document.querySelector(".fields__button-generate");null==a||a.addEventListener("click",(function(){r.generateCars(e),e.createTrack(t.getCars(n.garagePage)),e.updateGarageAmount(t),setTimeout((function(){return e.carHandler(t)}),300),e.paginationClickableButtons(n,t)}))},e}();t.Race=n},287:function(e,t,n){var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function i(e){try{u(r.next(e))}catch(e){o(e)}}function c(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{n=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Winners=void 0,n(411);var o=function(){function e(){}return e.prototype.createTable=function(){return'\n    <table class="table">\n      <thead>\n        <tr class="table__header table__row">\n          <th class="table__header">number</th>\n          <th class="table__header">car</th>\n          <th class="table__header">name</th>\n          <th class="table__header">wins</th>\n          <th class="table__header">best time</th>\n        </tr>\n      </thead>\n      <tbody class="table__body">\n\n      </tbody>\n    </table>\n    <div class="pagination">\n      <button disabled class="pagination__prev">prev</button>\n      <button class="pagination__next">next</button>\n    </div>'},e.prototype.createRow=function(e,t,n){var r=e.color,a=e.name,o=e.wins,i=e.time;return'\n      <td class="table__ceil">'.concat(n.winnersOnPage*(n.winnersPage-1)+t+1,'</td>\n      <td class="table__ceil">\n        <svg><use xlink:href="./sprite.svg#car" fill="').concat(r,'"></use></svg>\n      </td>\n      <td class="table__ceil">').concat(a,'</td>\n      <td class="table__ceil">').concat(o,'</td>\n      <td class="table__ceil">').concat(i,"</td>\n    ")},e.prototype.createTr=function(e,t,n){var r=document.createElement("tr");return r.classList.add("table__row"),r.innerHTML=this.createRow(e,t,n),r},e.prototype.isClickablePagination=function(e,t){var n=document.querySelector(".pagination__prev"),o=document.querySelector(".pagination__next");1===e.winnersPage?n.disabled=!0:n.disabled=!1,r(this,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,t.getWinnersAmount()];case 1:return n=r.sent(),Math.ceil(n/e.winnersOnPage)>e.winnersPage?o.disabled=!1:o.disabled=!0,[2]}}))}))},e.prototype.sortListener=function(e,t,n,r){var a=document.querySelector("thead tr");null==a||a.addEventListener("click",(function(a){var o=a.target;"wins"===o.innerText&&("wins"===e.sortValue?e.toggleOrder():e.sortOrder="ASC",e.sortValue="wins"),"best time"===o.innerText&&("time"===e.sortValue?e.toggleOrder():e.sortOrder="ASC",e.sortValue="time"),"number"===o.innerText&&("id"===e.sortValue?e.toggleOrder():e.sortOrder="ASC",e.sortValue="id"),t.generateWinners(r,n,e,e.sortValue,e.sortOrder)}))},e}();t.Winners=o}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nc=void 0,(()=>{var e=n(717),t=n(108),r=n(719),a=n(289),o=n(906),i=n(847),c=n(287),u=new e.App,s=new t.Generate,l=new r.Control,d=new a.Race,p=new o.CarTrack,f=new i.API,v=new c.Winners;document.querySelector("body").innerHTML='<nav class="nav">\n<button class="nav__button nav__button-garage">garage</button>\n<button class="nav__button nav__button-winners">winners</button>\n</nav>\n<div class=\'app\'></div>';var g=document.querySelector(".nav__button-garage"),h=document.querySelector(".nav__button-winners");null==g||g.addEventListener("click",(function(){document.querySelector(".app").innerHTML="",s.generateGarage(l,d,p,f,u),s.generateGarageListeners(p,f,u),d.generateRaceListeners(p,f,u),p.createTrack(f.getCars(u.garagePage)),g.disabled=!0,h.disabled=!1,setTimeout((function(){s.inputListeners(u),s.inputsFiller(u,f,p)}),200)})),setTimeout((function(){return g.click()}),500),h.addEventListener("click",(function(){g.disabled=!1,h.disabled=!0,document.querySelector(".app").innerHTML="",s.generatePageWinners(f,u),s.generateWinners(v,f,u,u.sortValue,u.sortOrder),document.querySelector(".app").innerHTML=v.createTable(),v.isClickablePagination(u,f),s.generateWinnersListeners(v,f,u,p),v.sortListener(u,s,f,v)}))})()})();